z<div class="dynamic-page" ng-if="!authorized">
	<div class="card mt50p">
		<div class="card-title">Authorization required!</div>
		<p class="card-note">Sorry, you have to authorize first</p>
		<a class="button button-block button-positive button-sm" href="#app/login">Log in</a>
	</div>
</div>
<div class="dynamic-page" ng-if="authorized">
	<ion-content ng-init="getBudgets()">
		<ion-refresher
			pulling-text="Pull to refresh..."
			on-refresh="doRefresh('b', bId)">
		</ion-refresher>
		<div class="list pt50">
			<label class="item item-input item-select">
				<div class="input-label">
					Budget
				</div>
				<select 
					ng-model="bId"
					ng-change="drawCanvas(bId)">
						<option value="">Select budget</option>
						<option 
							ng-repeat="b in budgets" 
							ng-value="b.id">
								{{b.name}}
						</option>
				</select>
			</label>
		</div>

		<div class="card-container">
			<div class="card card-lg">
					<div class="card-title">Balance</div>
					<div class="text15">Booked:</div> <div class="content-right">{{budget.totalCosts?budget.totalCosts:0}} {{currency}}</div>
					<div class="text15">Income:</div> <div class="content-right">{{budget.incomeCosts ? budget.incomeCosts : 0}} {{currency}}</div>
					<div class="text15">Spent:</div> <div class="content-right">{{budget.spentCosts ? budget.spentCosts : 0}} {{currency}}</div>
					<div class="text15">Balance:</div> <div class="content-right">{{budget.incomeCosts-budget.spentCosts}} {{currency}}</div>
			</div>
		</div>
		<div class="card" ng-show="bId==null || bId===''">
			<div class="card-title">Please, select the budget for detailed info </div>
			<p class="card-note">Sorry, there is no records found. Please, select the budget to see agregated info.</p>
		</div>
		<div class="card-container" ng-show="bId!=null && bId !=='' ">
			<div class="card">
				<div class="card-title"> Incomes and outcomes</div>
				<div class="canvas-container">
					<canvas id="incomeOutcomeChart" max-width="480" max-height="720"></canvas>
				</div>
			</div>
		</div>
		<div class="card-container" ng-show="bId!=null && bId !== ''">
			<div class="card">
				<div class="card-title"> Expences distribution</div>
				<div class="canvas-container">
					<canvas id="expensesPieChart" max-width="480" max-height="720"></canvas>
				</div>
			</div>
		</div>
	</ion-content>
</div>